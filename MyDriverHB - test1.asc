Version 4
SHEET 1 1872 1348
WIRE 992 176 704 176
WIRE 704 272 704 176
WIRE 992 272 992 176
WIRE -288 288 -416 288
WIRE -416 320 -416 288
WIRE 496 352 432 352
WIRE 656 352 576 352
WIRE -416 432 -416 400
WIRE 704 432 704 368
WIRE 832 432 704 432
WIRE 1104 432 832 432
WIRE 1248 432 1184 432
WIRE 1344 432 1248 432
WIRE 1424 432 1344 432
WIRE -592 480 -720 480
WIRE -320 480 -592 480
WIRE -288 480 -288 288
WIRE 368 480 192 480
WIRE 432 480 432 352
WIRE 432 480 368 480
WIRE 1248 480 1248 432
WIRE 1424 480 1424 432
WIRE -96 496 -256 496
WIRE 16 496 -96 496
WIRE -368 512 -416 512
WIRE -320 512 -368 512
WIRE 704 512 704 432
WIRE 704 512 192 512
WIRE 16 528 -32 528
WIRE -720 544 -720 480
WIRE 368 544 192 544
WIRE 432 544 368 544
WIRE -416 576 -416 512
WIRE -32 576 -32 528
WIRE 16 576 -32 576
WIRE 272 576 192 576
WIRE -288 592 -288 512
WIRE 992 608 992 352
WIRE 1248 608 1248 544
WIRE 1248 608 992 608
WIRE 1360 608 1248 608
WIRE 1424 608 1424 560
WIRE 1424 608 1360 608
WIRE 704 624 704 512
WIRE 992 640 992 608
WIRE -32 656 -32 576
WIRE -720 672 -720 624
WIRE -416 704 -416 656
WIRE 432 704 432 544
WIRE 496 704 432 704
WIRE 656 704 576 704
WIRE 272 800 272 576
WIRE 704 800 704 720
WIRE 704 800 272 800
WIRE 992 800 992 720
WIRE 992 800 704 800
WIRE 704 864 704 800
FLAG -416 704 0
FLAG -96 496 pwm
FLAG 368 480 out_a
FLAG 368 544 out_b
FLAG 704 864 0
FLAG -32 656 0
FLAG -720 672 0
FLAG -288 592 0
FLAG -416 432 0
FLAG -592 480 sin
FLAG -368 512 tri
FLAG 832 432 mid
FLAG 1360 608 -out
FLAG 1344 432 +out
SYMBOL res 592 336 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 10
SYMBOL res 592 688 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 10
SYMBOL voltage 992 256 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value {Vdc}
SYMBOL ind 1088 448 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 4m
SYMBOL res 1408 464 R0
SYMATTR InstName RL
SYMATTR Value 10
SYMBOL MyComparator -288 496 R0
WINDOW 38 14 22 Left 2
SYMATTR InstName U2
SYMBOL voltage 992 624 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value {Vdc}
SYMBOL voltage -416 560 R0
WINDOW 3 -195 188 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(-5 5 0 {1/2/fs} {1/2/fs} {0} {1/fs})
SYMATTR InstName Vtri1
SYMBOL voltage -720 528 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value SINE(0 {vsin} 50 0)
SYMBOL voltage -416 304 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 15
SYMBOL nmos 656 272 R0
SYMATTR InstName M1
SYMATTR Value STP8NM60
SYMBOL nmos 656 624 R0
SYMATTR InstName M2
SYMATTR Value STP8NM60
SYMBOL cap 1232 480 R0
SYMATTR InstName C1
SYMATTR Value 10n
SYMBOL MyDriverHB 128 528 R0
WINDOW 0 -98 -76 Bottom 2
WINDOW 38 22 -75 Bottom 2
WINDOW 123 -51 103 Bottom 2
SYMATTR InstName U3
TEXT -80 328 Left 2 !.tran 0 100m 80m 0.1u uic
TEXT -416 88 Left 2 !.param fs 20k
TEXT -416 128 Left 2 !.param vsin 3
TEXT 160 40 Left 2 !.measure Io_rms rms I(RL)\n.measure I2 avg -I(V2)\n.measure I3 avg -I(V3)\n.measure Pout  param 10*Io_rms**2\n.meas Pin PARAM 100*(I2+I3)\n.measure Eff  param Pout*100/Pin
TEXT -416 192 Left 2 !.param Vdc=100
